{% extends "base.html" %}
{% block title %}Asset History{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto bg-white shadow rounded-lg p-6">
    <h2 class="text-2xl font-bold mb-4">Asset Allocation History</h2>
    <form method="GET" class="mb-6">
        <label class="block mb-1 font-medium">Select Employee</label>
        <select name="employee_id" onchange="this.form.submit()" class="w-full border p-2 rounded">
            <option value="">-- Select --</option>
            {% for emp in employees %}
                <option value="{{ emp['emp_id'] }}" {% if emp['emp_id'] == selected_emp_id %}selected{% endif %}>
                    {{ emp['first_name'] }} {{ emp['last_name'] }}
                </option>
            {% endfor %}
        </select>
    </form>
    {% if history %}
    <table class="w-full">
        <thead class="bg-gray-100">
            <tr>
                <th class="p-2 text-center">Asset</th>
                <th class="p-2 text-center">Allocated Date</th>
                <th class="p-2 text-center">Status</th>
                <th class="p-2 text-center">Allocated By</th>
            </tr>
        </thead>
        <tbody>
            {% for row in history %}
            <tr class="border-t">
                <td class="p-2 text-center">{{ row['ItemName'] }} - {{ row['Model'] }}</td>
                <td class="p-2 text-center">{{ row['AllocateDate'] }}</td>
                <td class="p-2 text-center">{{ row['Status'] }}</td>
                <td class="p-2 text-center">{{ row['AllocatedBy'] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}
